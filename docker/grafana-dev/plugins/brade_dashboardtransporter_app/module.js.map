{"version":3,"file":"module.js","mappings":"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","sources":["webpack://brade-dashboardtransporter-app/external amd \"@grafana/ui\"","webpack://brade-dashboardtransporter-app/external amd \"module\"","webpack://brade-dashboardtransporter-app/external amd \"@grafana/runtime\"","webpack://brade-dashboardtransporter-app/external amd \"@grafana/data\"","webpack://brade-dashboardtransporter-app/external amd \"react\"","webpack://brade-dashboardtransporter-app/webpack/bootstrap","webpack://brade-dashboardtransporter-app/webpack/runtime/compat get default export","webpack://brade-dashboardtransporter-app/webpack/runtime/define property getters","webpack://brade-dashboardtransporter-app/webpack/runtime/hasOwnProperty shorthand","webpack://brade-dashboardtransporter-app/webpack/runtime/make namespace object","webpack://brade-dashboardtransporter-app/webpack/runtime/publicPath","webpack://brade-dashboardtransporter-app/./node_modules/grafana-public-path.js","webpack://brade-dashboardtransporter-app/./pages/ImportPage.tsx","webpack://brade-dashboardtransporter-app/./module.tsx"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__308__;","module.exports = __WEBPACK_EXTERNAL_MODULE__531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"public/plugins/brade-dashboardtransporter-app/\";","\nimport amdMetaModule from 'amd-module';\n\n__webpack_public_path__ =\n  amdMetaModule && amdMetaModule.uri\n    ? amdMetaModule.uri.slice(0, amdMetaModule.uri.lastIndexOf('/') + 1)\n    : 'public/plugins/brade-dashboardtransporter-app/';\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  Alert,\r\n  LoadingPlaceholder,\r\n  Icon,\r\n  HorizontalGroup,\r\n  VerticalGroup,\r\n  Field,\r\n  Select,\r\n  Input,\r\n} from '@grafana/ui';\r\nimport { getBackendSrv } from '@grafana/runtime';\r\n\r\n// Tipos\r\ntype Environment = {\r\n  id: string;\r\n  name: string;\r\n  url: string;\r\n};\r\n\r\ntype Dashboard = {\r\n  uid: string;\r\n  title: string;\r\n};\r\n\r\ntype ImportRequest = {\r\n  sourceEnv: string;\r\n  targetEnv: string;\r\n  folderUid: string;\r\n  requestedBy: string;\r\n  uids: string[];\r\n};\r\n\r\nexport const ImportPage: React.FC = () => {\r\n  // Estados\r\n  const [environments, setEnvironments] = useState<Environment[]>([]);\r\n  const [dashboards, setDashboards] = useState<Dashboard[]>([]);\r\n  const [selectedDashboards, setSelectedDashboards] = useState<Record<string, boolean>>({});\r\n  const [loading, setLoading] = useState({\r\n    environments: false,\r\n    dashboards: false,\r\n    import: false,\r\n  });\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n\r\n  // Form state\r\n  const [form, setForm] = useState<ImportRequest>({\r\n    sourceEnv: 'dev',\r\n    targetEnv: 'hml',\r\n    folderUid: '',\r\n    requestedBy: '',\r\n    uids: [],\r\n  });\r\n\r\n  // Carregar ambientes\r\n  useEffect(() => {\r\n    const loadEnvironments = async () => {\r\n      setLoading(prev => ({ ...prev, environments: true }));\r\n      try {\r\n        const data = await getBackendSrv().get('http://localhost:8080/environments');\r\n        setEnvironments(data);\r\n        if (data.length > 0) {\r\n          setForm(prev => ({\r\n            ...prev,\r\n            sourceEnv: data[0].id,\r\n            targetEnv: data.length > 1 ? data[1].id : data[0].id,\r\n          }));\r\n        }\r\n      } catch (err) {\r\n        setError('Erro ao carregar ambientes');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(prev => ({ ...prev, environments: false }));\r\n      }\r\n    };\r\n    \r\n    loadEnvironments();\r\n  }, []);\r\n\r\n  // Carregar dashboards quando sourceEnv mudar\r\n  useEffect(() => {\r\n    const loadDashboards = async () => {\r\n      if (!form.sourceEnv) return;\r\n      \r\n      setLoading(prev => ({ ...prev, dashboards: true }));\r\n      setSelectedDashboards({}); // Limpar seleção\r\n      \r\n      try {\r\n        const data = await getBackendSrv().get(\r\n          `http://localhost:8080/dashboards?env=${form.sourceEnv}`\r\n        );\r\n        setDashboards(data);\r\n      } catch (err) {\r\n        setError(`Erro ao carregar dashboards do ambiente ${form.sourceEnv}`);\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(prev => ({ ...prev, dashboards: false }));\r\n      }\r\n    };\r\n    \r\n    loadDashboards();\r\n  }, [form.sourceEnv]);\r\n\r\n  // Handlers\r\n  const toggleDashboard = (uid: string) => {\r\n    setSelectedDashboards(prev => {\r\n      const newState = { ...prev, [uid]: !prev[uid] };\r\n      // Atualizar uids no form\r\n      const selectedUids = Object.keys(newState).filter(key => newState[key]);\r\n      setForm(prevForm => ({ ...prevForm, uids: selectedUids }));\r\n      return newState;\r\n    });\r\n  };\r\n\r\n  const toggleSelectAll = () => {\r\n    const allSelected = dashboards.every(dash => selectedDashboards[dash.uid]);\r\n    const newSelection: Record<string, boolean> = {};\r\n    \r\n    if (allSelected) {\r\n      // Desmarcar todos\r\n      dashboards.forEach(dash => newSelection[dash.uid] = false);\r\n    } else {\r\n      // Marcar todos\r\n      dashboards.forEach(dash => newSelection[dash.uid] = true);\r\n    }\r\n    \r\n    setSelectedDashboards(newSelection);\r\n    const selectedUids = Object.keys(newSelection).filter(key => newSelection[key]);\r\n    setForm(prev => ({ ...prev, uids: selectedUids }));\r\n  };\r\n\r\n  const handleFormChange = (key: keyof ImportRequest, value: any) => {\r\n    setForm(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleImport = async () => {\r\n    if (form.uids.length === 0) {\r\n      setError('Selecione ao menos um dashboard para importar');\r\n      return;\r\n    }\r\n\r\n    if (!form.requestedBy.trim()) {\r\n      setError('Informe o usuário que receberá permissões');\r\n      return;\r\n    }\r\n\r\n    if (form.sourceEnv === form.targetEnv) {\r\n      setError('Ambiente de origem e destino não podem ser iguais');\r\n      return;\r\n    }\r\n\r\n    setLoading(prev => ({ ...prev, import: true }));\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const response = await getBackendSrv().post(\r\n        'http://localhost:8080/dashboards/import/batch',\r\n        form\r\n      );\r\n\r\n      setSuccess(`Importação concluída! ${response.count} dashboard(s) importado(s) com sucesso.`);\r\n      \r\n      // Limpar seleção após sucesso\r\n      setSelectedDashboards({});\r\n      setForm(prev => ({ ...prev, uids: [] }));\r\n      \r\n    } catch (err: any) {\r\n      const errorMessage = err.data?.message || err.message || 'Erro ao importar dashboards';\r\n      setError(errorMessage);\r\n      console.error('Import error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, import: false }));\r\n    }\r\n  };\r\n\r\n  // Opções para os selects\r\n  const environmentOptions = environments.map(env => ({\r\n    label: env.name,\r\n    value: env.id,\r\n  }));\r\n\r\n  // Renderização condicional\r\n  if (loading.environments) {\r\n    return (\r\n      <div style={{ padding: '32px', textAlign: 'center' }}>\r\n        <LoadingPlaceholder text=\"Carregando ambientes...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '24px', maxWidth: '1200px', margin: '0 auto' }}>\r\n      <VerticalGroup spacing=\"lg\">\r\n        {/* Cabeçalho */}\r\n        <div>\r\n          <h2>Dashboard Transporter</h2>\r\n          <p style={{ color: '#999' }}>\r\n            Transporte dashboards entre ambientes Grafana e aplique permissões automaticamente\r\n          </p>\r\n        </div>\r\n\r\n        {/* Mensagens */}\r\n        {error && (\r\n          <Alert title=\"Erro\" severity=\"error\" onRemove={() => setError(null)}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        \r\n        {success && (\r\n          <Alert title=\"Sucesso\" severity=\"success\" onRemove={() => setSuccess(null)}>\r\n            {success}\r\n          </Alert>\r\n        )}\r\n\r\n        {/* Formulário de configuração */}\r\n        <div style={{ \r\n          background: '#1e1e1e', \r\n          padding: '20px', \r\n          borderRadius: '4px',\r\n          border: '1px solid #2c3235'\r\n        }}>\r\n          <h4>Configuração da Importação</h4>\r\n          <VerticalGroup spacing=\"md\">\r\n            <HorizontalGroup spacing=\"lg\" wrap>\r\n              <Field label=\"Ambiente de Origem\">\r\n                <Select\r\n                  options={environmentOptions}\r\n                  value={form.sourceEnv}\r\n                  onChange={(option) => handleFormChange('sourceEnv', option?.value)}\r\n                  width={30}\r\n                />\r\n              </Field>\r\n              \r\n              <Field label=\"Ambiente de Destino\">\r\n                <Select\r\n                  options={environmentOptions.filter(opt => opt.value !== form.sourceEnv)}\r\n                  value={form.targetEnv}\r\n                  onChange={(option) => handleFormChange('targetEnv', option?.value)}\r\n                  width={30}\r\n                />\r\n              </Field>\r\n              \r\n              <Field label=\"Pasta (opcional)\" description=\"Deixe vazio para pasta raiz (General)\">\r\n                <Input\r\n                  placeholder=\"Ex: minha-pasta\"\r\n                  value={form.folderUid}\r\n                  onChange={(e) => handleFormChange('folderUid', e.currentTarget.value)}\r\n                  width={30}\r\n                />\r\n              </Field>\r\n              \r\n              <Field label=\"Usuário Destino\" required description=\"Receberá permissão de Editor\">\r\n                <Input\r\n                  placeholder=\"Ex: usuario@empresa.com\"\r\n                  value={form.requestedBy}\r\n                  onChange={(e) => handleFormChange('requestedBy', e.currentTarget.value)}\r\n                  width={30}\r\n                />\r\n              </Field>\r\n            </HorizontalGroup>\r\n          </VerticalGroup>\r\n        </div>\r\n\r\n        {/* Lista de dashboards */}\r\n        <div style={{ \r\n          background: '#1e1e1e', \r\n          padding: '20px', \r\n          borderRadius: '4px',\r\n          border: '1px solid #2c3235'\r\n        }}>\r\n          <HorizontalGroup justify=\"space-between\" align=\"center\">\r\n            <h4>Dashboards Disponíveis ({dashboards.length})</h4>\r\n            <div>\r\n              <span style={{ marginRight: '16px', color: '#999' }}>\r\n                {form.uids.length} selecionado(s)\r\n              </span>\r\n              <Button variant=\"secondary\" size=\"sm\" onClick={toggleSelectAll}>\r\n                {dashboards.every(dash => selectedDashboards[dash.uid]) \r\n                  ? 'Desmarcar Todos' \r\n                  : 'Selecionar Todos'}\r\n              </Button>\r\n            </div>\r\n          </HorizontalGroup>\r\n\r\n          {loading.dashboards ? (\r\n            <div style={{ padding: '32px', textAlign: 'center' }}>\r\n              <LoadingPlaceholder text=\"Carregando dashboards...\" />\r\n            </div>\r\n          ) : dashboards.length === 0 ? (\r\n            <Alert title=\"Nenhum dashboard encontrado\" severity=\"info\">\r\n              Não há dashboards disponíveis no ambiente selecionado.\r\n            </Alert>\r\n          ) : (\r\n            <div style={{ \r\n              maxHeight: '400px', \r\n              overflowY: 'auto',\r\n              marginTop: '16px'\r\n            }}>\r\n              <table className=\"filter-table\" style={{ width: '100%' }}>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ width: '40px' }}>\r\n                      <Checkbox\r\n                        value={dashboards.every(dash => selectedDashboards[dash.uid])}\r\n                        onChange={toggleSelectAll}\r\n                      />\r\n                    </th>\r\n                    <th>Título</th>\r\n                    <th>UID</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {dashboards.map((dashboard) => (\r\n                    <tr key={dashboard.uid}>\r\n                      <td>\r\n                        <Checkbox\r\n                          value={!!selectedDashboards[dashboard.uid]}\r\n                          onChange={() => toggleDashboard(dashboard.uid)}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <HorizontalGroup spacing=\"sm\">\r\n                          <Icon name=\"apps\" />\r\n                          <span>{dashboard.title || 'Sem título'}</span>\r\n                        </HorizontalGroup>\r\n                      </td>\r\n                      <td>\r\n                        <code>{dashboard.uid}</code>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Botão de ação */}\r\n        <HorizontalGroup>\r\n          <Button\r\n            variant=\"primary\"\r\n            size=\"lg\"\r\n            onClick={handleImport}\r\n            disabled={loading.import || form.uids.length === 0 || !form.requestedBy}\r\n          >\r\n            {loading.import ? 'Importando...' : 'Importar Dashboards'}\r\n          </Button>\r\n          \r\n          {form.uids.length > 0 && (\r\n            <span style={{ color: '#999', marginLeft: '16px' }}>\r\n              <Icon name=\"info-circle\" /> {form.uids.length} dashboard(s) serão importados\r\n            </span>\r\n          )}\r\n        </HorizontalGroup>\r\n\r\n        {/* Informações adicionais */}\r\n        <div style={{ \r\n          background: '#1b1b1f', \r\n          padding: '16px', \r\n          borderRadius: '4px',\r\n          fontSize: '12px',\r\n          color: '#999'\r\n        }}>\r\n          <HorizontalGroup>\r\n            <Icon name=\"info-circle\" />\r\n            <span>\r\n              <strong>Atenção:</strong> Dashboards existentes no destino com o mesmo UID serão sobrescritos.\r\n              O usuário especificado receberá permissão de Editor em todos os dashboards importados.\r\n            </span>\r\n          </HorizontalGroup>\r\n        </div>\r\n      </VerticalGroup>\r\n    </div>\r\n  );\r\n};","import { AppPlugin } from '@grafana/data';\nimport { ImportPage } from './pages/ImportPage';\n\n// Versão SIMPLES que FUNCIONA\nexport const plugin = new AppPlugin()\n  .addConfigPage({\n    title: 'Importar Dashboards',\n    icon: 'cloud-upload',\n    id: 'import',\n    body: ImportPage,\n  });"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__308__","__WEBPACK_EXTERNAL_MODULE__531__","__WEBPACK_EXTERNAL_MODULE__781__","__WEBPACK_EXTERNAL_MODULE__959__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","p","slice","lastIndexOf","plugin","AppPlugin","addConfigPage","title","icon","id","body","environments","setEnvironments","useState","dashboards","setDashboards","selectedDashboards","setSelectedDashboards","loading","setLoading","import","error","setError","success","setSuccess","form","setForm","sourceEnv","targetEnv","folderUid","requestedBy","uids","useEffect","prev","data","getBackendSrv","length","err","console","toggleSelectAll","allSelected","every","dash","uid","newSelection","forEach","selectedUids","keys","filter","handleFormChange","environmentOptions","map","env","label","name","div","style","padding","textAlign","LoadingPlaceholder","text","maxWidth","margin","VerticalGroup","spacing","h2","color","Alert","severity","onRemove","background","borderRadius","border","h4","HorizontalGroup","wrap","Field","Select","options","onChange","option","width","opt","description","Input","placeholder","e","currentTarget","required","justify","align","span","marginRight","Button","variant","size","onClick","maxHeight","overflowY","marginTop","table","className","thead","tr","th","Checkbox","tbody","dashboard","td","toggleDashboard","newState","prevForm","Icon","code","trim","response","post","count","errorMessage","message","disabled","marginLeft","fontSize","strong"],"ignoreList":[],"sourceRoot":""}